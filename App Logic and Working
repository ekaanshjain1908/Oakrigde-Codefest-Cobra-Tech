from striprtf.striprtf import rtf_to_text

with open("Document.rtf") as infile:
    content = infile.read()
    text = rtf_to_text(content)
repairs = ['UrbanClap', 'plumb', 'mechanic', 'fix', 'carpent', 'repairs']
movies = ['PVR', 'INOX', 'CarnivalCinemas', 'Cinepolis', 'Miraj']
transport = ['Ola', 'Uber', 'Nammayatri', 'Makemytrip', 'Booking', 'Indigo', 'airlines']
insurance= ['LIC', 'HDFClife', 'Maxlife', 'RelianceNippon', 'Sahara', 'Canara', 'Indiafirst', 'Acko','Cigna', 'digit', 'generali', 'magma']
grocery = ['Blinkit', 'mart', 'fruit', 'vegetable', '1mg', 'palmolive']
food = ['Swiggy', 'Zomato', 'PandaExpress', 'Ubereats', 'Grubhub', 'Doordash', 'Dominos', 'Pizzahut']
entertainment = ['PVR', 'BookMyShow', 'Netflix', 'Disney', 'Hotstar', 'Amazonprime', 'Voot', 'JioLiv', 'Sonyliv', 'Youtube']
electronic = ['Reliance', 'Croma', 'Sony', 'digital', 'phone', 'electronics', 'electronic', 'realme', 'readme', 'samsung', 'apple', 'HP', 'microsoft', 'casio', 'nokia']
homeimprovement= ['sofasandmore', 'stanleys', 'toyota', 'mercedes', 'audi','BMW', 'skoda', 'volkswagen', 'cars', 'sofas', 'durian']

repairrep = 0
movierep = 0
transportrep = 0
insurancerep = 0
foodrep = 0
groceryrep = 0
entertainmentrep = 0
electronicrep = 0
homeimprovementrep = 0
miscellanousrep = 0

totalrepairs = 0
totalmovie = 0
totaltransport = 0
totalinsurance = 0
totalfood = 0
totalgrocery = 0
totalentertainment = 0
totalelectronic = 0
totalhomeimprovement = 0
totalmiscellanous = 0

text = text.split()
text.pop()
print(text)

while text != []:
    current_file_name = text[0:1]
    current_file_cost = text[0]
    print(current_file_name[0])
    word = ''
    text.remove(current_file_cost[0])
    def check(groceryrep, foodrep, entertainmentrep, miscellanousrep, electronicrep, homerep, grocerycost, foodcost, entertainmentcost, miscellanouscost, electroniccost, homeimprovementcost, grocerydate, fooddate, entertainmentdate, miscellanousdate, electronicdate, home_improvementdate, word):
        print('STARTING CHECK')
        found = 0
        date = ''
        y = 0
        z = 0
        cost = ''
        list = []
        for i in current_file_cost:
            list.append(i)
        while list[z + 2] != '/':
            list.remove(list[z])

        for i in list:
            if i == '-':
                break
            else:
                date += i
        print(word)
        for i in current_file_cost:
            y += 1
            for j in i:
                if j == 'â‚¹':
                    while current_file_cost[y] != '-':
                        print(current_file_cost[y])
                        cost += current_file_cost[y]
                        y += 1

        print(cost)

        print(word)
        print(word, 'lol')

        for i in grocery:
            if word.find(i) != -1:
                print(i, word)
                groceryrep += 1
                grocerycost += int(cost)
                grocerydate.append(cost)
                found = 1

        for i in food:
            if found != 1:
                if word.find(i) != -1:
                    print(i, word)
                    foodrep += 1
                    foodcost += int(cost)
                    fooddate.append(cost)
                    found = 1

        for i in entertainment:
            if found != 1:
                if word.find(i) != -1:
                    print(i, word)
                    entertainmentrep +=1
                    entertainmentcost += int(cost)
                    entertainmentdate.append(cost)
                    found = 1

        for i in electronic:
            if found != 1:
                if word.find(i) != -1:
                    print(i, word)
                    electronicrep += 1
                    electroniccost += int(cost)
                    electronicdate.append(cost)
                    found = 1

        for i in homeimprovement:
            if found != 1:
                if word.find(i) != -1:
                    print(i, word)
                    homerep += 1
                    homeimprovementcost += int(cost)
                    home_improvementdate.append(cost)
                    found = 1

        if found != 1:
            miscellanousrep += 1
            miscellanouscost += int(cost)
            miscellanousdate.append(cost)


        return groceryrep, foodrep, entertainmentrep,  miscellanousrep, electronicrep, homerep, grocerycost, foodcost, entertainmentcost, miscellanouscost, electroniccost, homeimprovementcost, grocerydate, fooddate, entertainmentdate, miscellanousdate, electronicdate, home_improvementdate
    print(current_file_name)
    for i in current_file_name:
        for j in i:
            if j != '-' and j != '.':
                word += j
            else:
                break
        print(word)

    repairrep, movierep, transportrep, insurancerep, groceryrep, foodrep, entertainmentrep, electronicrep, homeimprovementrep, miscellanousrep   = check(word)
    print(repairrep, movierep, transportrep, insurancerep, foodrep, entertainmentrep, electronicrep, homeimprovementrep)
    print(totalfood, totalmovie, totalgrocery, totalrepairs, totalinsurance, totalinsurance, totaltransport, totalhomeimprovement, totalentertainment, totalmiscellanous)
